# å ã„è‡ªå‹•é‘‘å®šã‚·ã‚¹ãƒ†ãƒ  PRãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

## 1. ãƒ¬ãƒ“ãƒ¥ãƒ¼ã®å¿ƒæ§‹ãˆ

### 1.1 åŸºæœ¬å§¿å‹¢
- ğŸ¯ **å»ºè¨­çš„**: å•é¡Œã®æŒ‡æ‘˜ã ã‘ã§ãªãã€æ”¹å–„æ¡ˆã‚’æç¤º
- ğŸ’­ **è¬™è™š**: è‡ªåˆ†ã®ç†è§£ãŒé–“é•ã£ã¦ã„ã‚‹å¯èƒ½æ€§ã‚’è€ƒæ…®
- ğŸ‘ **ç§°è³›**: è‰¯ã„ã‚³ãƒ¼ãƒ‰ã«ã¯ç©æ¥µçš„ã«è¤’ã‚ã‚‹
- â“ **è³ªå•**: ä¸æ˜ãªç‚¹ã¯é æ…®ãªãè³ªå•

### 1.2 ãƒ¬ãƒ“ãƒ¥ãƒ¼å„ªå…ˆåº¦
1. **ğŸš¨ Critical**: ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ãƒ‡ãƒ¼ã‚¿æå¤±ã€ã‚·ã‚¹ãƒ†ãƒ åœæ­¢ã®å¯èƒ½æ€§
2. **ğŸ¯ Must**: ãƒã‚°ã€è¦ä»¶æœªé”ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å•é¡Œ
3. **ğŸ’­ Should**: ã‚³ãƒ¼ãƒ‰å“è³ªã€ä¿å®ˆæ€§ã€ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
4. **ğŸ’¡ Consider**: æ”¹å–„ææ¡ˆã€åˆ¥è§£ã®æç¤º
5. **ğŸ“ Note**: æƒ…å ±å…±æœ‰ã€å°†æ¥ã®å‚è€ƒ

## 2. æ©Ÿèƒ½è¦ä»¶ãƒã‚§ãƒƒã‚¯

### 2.1 è¦ä»¶ã®å®Ÿè£…ç¢ºèª

```markdown
## ğŸ¯ Must: è¦ä»¶ç¢ºèª
- [ ] Issueã«è¨˜è¼‰ã•ã‚ŒãŸè¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹
- [ ] å—ã‘å…¥ã‚Œæ¡ä»¶ï¼ˆAcceptance Criteriaï¼‰ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹ã‹

### ç¢ºèªãƒã‚¤ãƒ³ãƒˆ
1. **æ­£å¸¸ç³»**: æœŸå¾…é€šã‚Šã®å‹•ä½œã‚’ã™ã‚‹ã‹
2. **ç•°å¸¸ç³»**: ã‚¨ãƒ©ãƒ¼æ™‚ã®æŒ™å‹•ã¯é©åˆ‡ã‹
3. **å¢ƒç•Œå€¤**: æœ€å¤§å€¤ãƒ»æœ€å°å€¤ã§ã®å‹•ä½œã¯æ­£ã—ã„ã‹
```

### 2.2 UI/UXç¢ºèª

```markdown
## ğŸ’­ Should: UI/UXç¢ºèª
- [ ] ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ¢ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¨ä¸€è‡´ã—ã¦ã„ã‚‹ã‹
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼ˆa11yï¼‰ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°çŠ¶æ…‹ãŒé©åˆ‡ã«è¡¨ç¤ºã•ã‚Œã‚‹ã‹
- [ ] ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ã‹
```

## 3. ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯

### 3.1 TypeScript/å‹å®‰å…¨æ€§

```typescript
// ğŸ¯ Must: anyå‹ã®ä½¿ç”¨ã‚’é¿ã‘ã‚‹
// âŒ Bad
const processData = (data: any) => {
  return data.value;
};

// âœ… Good
interface DataType {
  value: string;
}
const processData = (data: DataType) => {
  return data.value;
};

// ğŸ’­ Should: å‹å®šç¾©ã®å…±é€šåŒ–
// âŒ Bad - åŒã˜å‹ã‚’è¤‡æ•°ç®‡æ‰€ã§å®šç¾©
interface UserInComponent {
  id: string;
  name: string;
}

// âœ… Good - å…±é€šã®å‹å®šç¾©ã‚’ä½¿ç”¨
import { User } from '@/types';
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] anyå‹ã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ã‹
- [ ] å‹å®šç¾©ãŒé©åˆ‡ã‹ï¼ˆéä¸è¶³ãªãï¼‰
- [ ] å‹ã®å†åˆ©ç”¨æ€§ãŒè€ƒæ…®ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] strictNullChecksã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹

### 3.2 React/Next.js

```typescript
// ğŸ¯ Must: useEffectã®ä¾å­˜é…åˆ—
// âŒ Bad
useEffect(() => {
  fetchData(userId);
}, []); // userIdãŒä¾å­˜é…åˆ—ã«ãªã„

// âœ… Good
useEffect(() => {
  fetchData(userId);
}, [userId]);

// ğŸ’­ Should: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
// âŒ Bad - æ¯å›æ–°ã—ã„é–¢æ•°ã‚’ä½œæˆ
<Button onClick={() => handleClick(id)} />

// âœ… Good - useCallbackã§æœ€é©åŒ–
const handleButtonClick = useCallback(() => {
  handleClick(id);
}, [id]);
<Button onClick={handleButtonClick} />
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] useEffectã®ä¾å­˜é…åˆ—ã¯æ­£ã—ã„ã‹
- [ ] ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãŒç™ºç”Ÿã—ã¦ã„ãªã„ã‹
- [ ] ãƒ¡ãƒ¢åŒ–ï¼ˆuseMemo, useCallbackï¼‰ãŒé©åˆ‡ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®è²¬å‹™ãŒå˜ä¸€ã‹

### 3.3 ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

```typescript
// ğŸ¯ Must: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
// âŒ Bad
try {
  const result = await fetchData();
  setData(result);
} catch (e) {
  console.log(e); // ã‚¨ãƒ©ãƒ¼ã‚’æ¡ã‚Šã¤ã¶ã—ã¦ã„ã‚‹
}

// âœ… Good
try {
  const result = await fetchData();
  setData(result);
} catch (error) {
  logger.error('ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼', error);
  setError('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®é€šçŸ¥
  toast.error('ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ');
}
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] try-catchãŒé©åˆ‡ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ã‚¨ãƒ©ãƒ¼ãŒãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€šçŸ¥ã•ã‚Œã‚‹ã‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ãŒè¨˜éŒ²ã•ã‚Œã‚‹ã‹
- [ ] ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‡¦ç†ãŒã‚ã‚‹ã‹

## 4. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯

### 4.1 èªè¨¼ãƒ»èªå¯

```typescript
// ğŸš¨ Critical: èªå¯ãƒã‚§ãƒƒã‚¯
// âŒ Bad - èªå¯ãƒã‚§ãƒƒã‚¯ãªã—
export const deleteUser = async (userId: string) => {
  await db.users.delete({ where: { id: userId } });
};

// âœ… Good - èªå¯ãƒã‚§ãƒƒã‚¯ã‚ã‚Š
export const deleteUser = protectedProcedure
  .input(z.object({ userId: z.string() }))
  .mutation(async ({ ctx, input }) => {
    // ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯
    if (ctx.session.user.role !== 'admin') {
      throw new TRPCError({ code: 'FORBIDDEN' });
    }
    
    await db.users.delete({ where: { id: input.userId } });
  });
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] èªè¨¼ãŒå¿…è¦ãªã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ä¿è­·ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] æ¨©é™ãƒã‚§ãƒƒã‚¯ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã¯é©åˆ‡ã‹
- [ ] ãƒˆãƒ¼ã‚¯ãƒ³ã®æœ‰åŠ¹æœŸé™ã¯è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹

### 4.2 å…¥åŠ›æ¤œè¨¼

```typescript
// ğŸš¨ Critical: å…¥åŠ›æ¤œè¨¼
// âŒ Bad - æ¤œè¨¼ãªã—
const createFortune = async (data: any) => {
  return await db.fortunes.create({ data });
};

// âœ… Good - Zodã«ã‚ˆã‚‹æ¤œè¨¼
const createFortuneSchema = z.object({
  name: z.string().min(1).max(100),
  birthdate: z.string().regex(/^\d{4}-\d{2}-\d{2}$/),
  consultation: z.string().max(500),
});

const createFortune = async (data: unknown) => {
  const validatedData = createFortuneSchema.parse(data);
  return await db.fortunes.create({ data: validatedData });
};
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] ã™ã¹ã¦ã®å…¥åŠ›å€¤ãŒæ¤œè¨¼ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã¯ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] XSSå¯¾ç­–ã¯ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®æ¤œè¨¼ã¯é©åˆ‡ã‹

### 4.3 æ©Ÿå¯†æƒ…å ±ã®å–ã‚Šæ‰±ã„

```typescript
// ğŸš¨ Critical: æ©Ÿå¯†æƒ…å ±ã®éœ²å‡º
// âŒ Bad - APIã‚­ãƒ¼ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰
const apiKey = "sk-ant-api03-xxxxx";

// âœ… Good - ç’°å¢ƒå¤‰æ•°ã‹ã‚‰å–å¾—
const apiKey = process.env.CLAUDE_API_KEY;

// ğŸš¨ Critical: ãƒ­ã‚°ã«æ©Ÿå¯†æƒ…å ±
// âŒ Bad
logger.info('User login', { email, password });

// âœ… Good
logger.info('User login', { email });
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] APIã‚­ãƒ¼ç­‰ãŒãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ãªã„ã‹
- [ ] ç’°å¢ƒå¤‰æ•°ãŒé©åˆ‡ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ­ã‚°ã«æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ãªã„ã‹
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å†…éƒ¨æƒ…å ±ãŒéœ²å‡ºã—ã¦ã„ãªã„ã‹

## 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒã‚§ãƒƒã‚¯

### 5.1 ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ã‚¨ãƒª

```typescript
// ğŸ¯ Must: N+1å•é¡Œ
// âŒ Bad
const users = await db.users.findMany();
for (const user of users) {
  const requests = await db.fortuneRequests.findMany({
    where: { userId: user.id }
  });
}

// âœ… Good - includeã§ä¸€æ‹¬å–å¾—
const users = await db.users.findMany({
  include: {
    fortuneRequests: true
  }
});
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] N+1å•é¡Œã¯ç™ºç”Ÿã—ã¦ã„ãªã„ã‹
- [ ] ä¸è¦ãªãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦ã„ãªã„ã‹ï¼ˆselectæŒ‡å®šï¼‰
- [ ] ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒæ´»ç”¨ã•ã‚Œã‚‹ã‚¯ã‚¨ãƒªã‹
- [ ] ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹

### 5.2 ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æœ€é©åŒ–

```typescript
// ğŸ’­ Should: ç”»åƒæœ€é©åŒ–
// âŒ Bad
<img src="/large-image.png" />

// âœ… Good - Next.js Imageã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
import Image from 'next/image';
<Image
  src="/large-image.png"
  alt="èª¬æ˜"
  width={800}
  height={600}
  loading="lazy"
/>
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] ç”»åƒã¯æœ€é©åŒ–ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] é…å»¶ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒé©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒãƒ³ãƒ‰ãƒ«ã‚µã‚¤ã‚ºã¯é©åˆ‡ã‹
- [ ] ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã¯é˜²ã’ã¦ã„ã‚‹ã‹

## 6. ãƒ†ã‚¹ãƒˆãƒã‚§ãƒƒã‚¯

### 6.1 ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸

```typescript
// ğŸ¯ Must: é‡è¦ãªãƒ­ã‚¸ãƒƒã‚¯ã®ãƒ†ã‚¹ãƒˆ
describe('FortuneService', () => {
  it('should deduct credits when creating fortune', async () => {
    const user = await createTestUser({ credits: 5 });
    
    await fortuneService.create(user.id, fortuneData);
    
    const updatedUser = await getUser(user.id);
    expect(updatedUser.credits).toBe(4);
  });
  
  it('should throw error when insufficient credits', async () => {
    const user = await createTestUser({ credits: 0 });
    
    await expect(
      fortuneService.create(user.id, fortuneData)
    ).rejects.toThrow('ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒä¸è¶³ã—ã¦ã„ã¾ã™');
  });
});
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] æ–°æ©Ÿèƒ½ã«å¯¾ã™ã‚‹ãƒ†ã‚¹ãƒˆãŒè¿½åŠ ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãŒãƒ†ã‚¹ãƒˆã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] æ—¢å­˜ã®ãƒ†ã‚¹ãƒˆãŒå£Šã‚Œã¦ã„ãªã„ã‹
- [ ] ãƒ†ã‚¹ãƒˆã®å¯èª­æ€§ã¯é«˜ã„ã‹

### 6.2 E2Eãƒ†ã‚¹ãƒˆ

```typescript
// ğŸ’­ Should: é‡è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ã®E2Eãƒ†ã‚¹ãƒˆ
test('å ã„ç”³è¾¼ãƒ•ãƒ­ãƒ¼', async ({ page }) => {
  // ãƒ­ã‚°ã‚¤ãƒ³
  await page.goto('/login');
  await page.fill('[name="email"]', 'test@example.com');
  await page.fill('[name="password"]', 'password');
  await page.click('button[type="submit"]');
  
  // å ã„é¸æŠ
  await page.click('text=å ã„ã‚’é¸ã¶');
  await page.click('text=ä¹æ˜Ÿæ°—å­¦');
  
  // ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›
  await page.fill('[name="name"]', 'å±±ç”°å¤ªéƒ');
  // ...
  
  // çµæœç¢ºèª
  await expect(page).toHaveURL('/fortune/complete');
});
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] ä¸»è¦ãªãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ­ãƒ¼ãŒã‚«ãƒãƒ¼ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆã¯ã‚ã‚‹ã‹
- [ ] ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®E2Eãƒ†ã‚¹ãƒˆã¯ã‚ã‚‹ã‹

## 7. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ»ã‚³ãƒ¡ãƒ³ãƒˆ

### 7.1 ã‚³ãƒ¼ãƒ‰ã‚³ãƒ¡ãƒ³ãƒˆ

```typescript
// ğŸ’¡ Consider: è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã¸ã®ã‚³ãƒ¡ãƒ³ãƒˆ
// âœ… Good - ãªãœã“ã†ã—ã¦ã„ã‚‹ã‹ã‚’èª¬æ˜
// Claude APIã®ãƒ¬ãƒ¼ãƒˆåˆ¶é™ï¼ˆ1åˆ†10ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ã‚’è€ƒæ…®ã—ã¦
// åŒæ™‚å®Ÿè¡Œæ•°ã‚’2ã«åˆ¶é™ã—ã€exponential backoffã§å†è©¦è¡Œ
const CONCURRENT_JOBS = 2;
const MAX_RETRIES = 3;

// âŒ Bad - ã‚³ãƒ¼ãƒ‰ã‚’èª­ã‚ã°ã‚ã‹ã‚‹ã“ã¨ã‚’èª¬æ˜
// userIdã‚’å–å¾—ã™ã‚‹
const userId = session.user.id;
```

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] è¤‡é›‘ãªãƒ­ã‚¸ãƒƒã‚¯ã«èª¬æ˜ãŒã‚ã‚‹ã‹
- [ ] TODOã‚³ãƒ¡ãƒ³ãƒˆã«æœŸé™ã‚„æ‹…å½“è€…ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ä¸è¦ãªã‚³ãƒ¡ãƒ³ãƒˆã¯å‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] JSDocã¯é©åˆ‡ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‹

### 7.2 PRèª¬æ˜

**ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ**:
- [ ] PRã®èª¬æ˜ã¯ååˆ†ã‹
- [ ] ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒæ·»ä»˜ã•ã‚Œã¦ã„ã‚‹ã‹ï¼ˆUIå¤‰æ›´ã®å ´åˆï¼‰
- [ ] ç ´å£Šçš„å¤‰æ›´ã¯æ˜è¨˜ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] ãƒ†ã‚¹ãƒˆæ–¹æ³•ãŒè¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‹

## 8. ç‰¹å®šæŠ€è¡“ã®ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ

### 8.1 tRPC

```typescript
// ğŸ¯ Must: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
export const fortuneRouter = createTRPCRouter({
  create: protectedProcedure
    .input(createFortuneSchema)
    .mutation(async ({ ctx, input }) => {
      // ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å‡¦ç†
      return await ctx.db.$transaction(async (tx) => {
        // ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãƒã‚§ãƒƒã‚¯
        const user = await tx.user.findUnique({
          where: { id: ctx.session.user.id }
        });
        
        if (user.credits < requiredCredits) {
          throw new TRPCError({
            code: 'PRECONDITION_FAILED',
            message: 'ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒä¸è¶³ã—ã¦ã„ã¾ã™',
          });
        }
        
        // å‡¦ç†å®Ÿè¡Œ
        // ...
      });
    }),
});
```

### 8.2 Prisma

```typescript
// ğŸ’­ Should: åŠ¹ç‡çš„ãªã‚¯ã‚¨ãƒª
// âœ… Good - å¿…è¦ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã¿é¸æŠ
const user = await db.user.findUnique({
  where: { id: userId },
  select: {
    id: true,
    name: true,
    credits: true,
  }
});
```

### 8.3 Next.js App Router

```typescript
// ğŸ¯ Must: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®è¨­å®š
export const metadata: Metadata = {
  title: 'å ã„ç”³è¾¼ | å ã„è‡ªå‹•é‘‘å®šã‚·ã‚¹ãƒ†ãƒ ',
  description: 'AIå ã„å¸«ã«ã‚ˆã‚‹æœ¬æ ¼çš„ãªå ã„é‘‘å®š',
};

// ğŸ’­ Should: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
export default function Error({
  error,
  reset,
}: {
  error: Error;
  reset: () => void;
}) {
  return (
    <div>
      <h2>ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ</h2>
      <button onClick={reset}>å†è©¦è¡Œ</button>
    </div>
  );
}
```

## 9. ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚³ãƒ¡ãƒ³ãƒˆã®æ›¸ãæ–¹

### 9.1 è‰¯ã„ä¾‹

```markdown
## ğŸ¯ Must: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆä¸è¶³æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

ç¾åœ¨ã®å®Ÿè£…ã§ã¯ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆä¸è¶³æ™‚ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ãŒã€
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãŒã‚ã‚Šã¾ã›ã‚“ã€‚

ä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã‚’ææ¡ˆã—ã¾ã™ï¼š

```typescript
if (user.credits < requiredCredits) {
  // ã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼
  throw new TRPCError({
    code: 'PRECONDITION_FAILED',
    message: `ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆãŒä¸è¶³ã—ã¦ã„ã¾ã™ã€‚å¿…è¦: ${requiredCredits}ã€ç¾åœ¨: ${user.credits}`,
  });
}
```

ã¾ãŸã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã§ã‚‚ã‚¨ãƒ©ãƒ¼ã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦ã€
ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆè³¼å…¥ãƒšãƒ¼ã‚¸ã¸ã®å°ç·šã‚’è¡¨ç¤ºã™ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚
```

### 9.2 æ‚ªã„ä¾‹

```markdown
ã“ã‚Œã¯è‰¯ããªã„ã€‚
ç›´ã—ã¦ãã ã•ã„ã€‚
```

## 10. ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆè¦ç´„

### å¿…é ˆç¢ºèªé …ç›®ï¼ˆãƒãƒ¼ã‚¸å‰ã«å¿…ãšç¢ºèªï¼‰

- [ ] **è¦ä»¶**: Issueã®è¦ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹
- [ ] **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: èªè¨¼ãƒ»èªå¯ãƒ»å…¥åŠ›æ¤œè¨¼ã¯é©åˆ‡ã‹
- [ ] **ã‚¨ãƒ©ãƒ¼**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã¯å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] **å‹å®‰å…¨æ€§**: TypeScriptã®å‹ã¯é©åˆ‡ã‹
- [ ] **ãƒ†ã‚¹ãƒˆ**: ãƒ†ã‚¹ãƒˆã¯è¿½åŠ /æ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã‹
- [ ] **ãƒ“ãƒ«ãƒ‰**: CIãŒæˆåŠŸã—ã¦ã„ã‚‹ã‹

### æ¨å¥¨ç¢ºèªé …ç›®

- [ ] **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: N+1å•é¡Œç­‰ã¯ãªã„ã‹
- [ ] **å¯èª­æ€§**: ã‚³ãƒ¼ãƒ‰ã¯ç†è§£ã—ã‚„ã™ã„ã‹
- [ ] **ä¿å®ˆæ€§**: å°†æ¥ã®å¤‰æ›´ã«å¯¾å¿œã—ã‚„ã™ã„ã‹
- [ ] **ä¸€è²«æ€§**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¦ç´„ã«å¾“ã£ã¦ã„ã‚‹ã‹
- [ ] **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: å¿…è¦ãªã‚³ãƒ¡ãƒ³ãƒˆã¯ã‚ã‚‹ã‹

---

ã“ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã‚’æ´»ç”¨ã—ã¦ã€å“è³ªã®é«˜ã„ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’å®Ÿæ–½ã—ã¦ãã ã•ã„ã€‚
ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¯å­¦ç¿’ã®æ©Ÿä¼šã§ã‚‚ã‚ã‚‹ã®ã§ã€ç©æ¥µçš„ã«è³ªå•ã—ã€çŸ¥è­˜ã‚’å…±æœ‰ã—ã¾ã—ã‚‡ã†ã€‚